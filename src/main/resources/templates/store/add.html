<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Fait Main Add</title>

<style>
body {
	font-family: 'Noto Sans KR', sans-serif;
	background-color: #f8f9fa;
	padding-top: 80px;
}

.container {
	max-width: 900px;
}

.maker-group {
	border: 1px solid #ddd;
	border-radius: 10px;
	padding: 20px;
	margin-bottom: 20px;
	background-color: #fff;
}

.remove-btn {
	background-color: crimson;
	color: white;
	border: none;
	padding: 5px 10px;
	margin-top: 10px;
}
</style>

<script
	src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>

<!-- 주소 검색 버튼 -->
<script>
	function searchRoadAddress() {
	    new daum.Postcode({
	        oncomplete: function(data) {
	            // ✅ 도로명 주소만 입력창에 삽입
	            document.getElementById('roadAddress').value = data.roadAddress;
	        }
	    }).open();
	}
</script>

<!-- mkaer 추가 버튼 -->
<script>
	window.addEventListener("DOMContentLoaded", () => {
	    const template = document.getElementById("maker-template");
	
	    document.getElementById("add-button").addEventListener("click", () => {
	        const container = document.getElementById("maker-container");
	        const clone = template.content.cloneNode(true);
	        container.appendChild(clone);
	    });
	
	    document.getElementById("maker-container").addEventListener("click", (e) => {
	        if (e.target.classList.contains("remove-btn")) {
	            e.target.closest(".maker-group").remove();
	        }
	    });
	});
</script>


<th:block th:replace="/fragment/head.html :: header"></th:block>
</head>
<body>
	<!-- 네비게이션 -->
	<div th:replace="/fragment/nav.html :: nav"></div>

	<!-- 메인 컨테이너 -->
	<div class="container">
		<div class="text-center mb-4">
			<h3 class="fw-bold">가게 등록</h3>
		</div>

		<div class="card shadow-sm">
			<div class="card-body p-4">
				<form method="post" id="add" enctype="multipart/form-data">
					<!-- 가게 정보 -->
					<h5 class="fw-semibold mb-3">가게 정보</h5>

					<div class="mb-3">
						<label class="form-label">고객 ID</label> <input type="text"
							name="custId" class="form-control"
							th:value="${session.customer.id}" readonly>
					</div>

					<div class="mb-3">
						<label class="form-label">사업자번호</label> <input type="text"
							name="ceonum" class="form-control" required>
					</div>

					<div class="mb-3">
						<label class="form-label">가게 이름</label> <input type="text"
							name="name" class="form-control" required>
					</div>

					<div class="mb-3">
						<label class="form-label">주소</label>
						<div class="input-group">
							<input type="text" id="roadAddress" name="address"
								class="form-control" placeholder="도로명 주소" required>
							<button type="button" class="btn btn-outline-secondary"
								onclick="searchRoadAddress()">주소 검색</button>
						</div>
					</div>

					<div class="mb-3">
						<label class="form-label">대표 이미지</label> <input type="file"
							name="mainImage" class="form-control" accept="image/*" required>
					</div>

					<div class="mb-3">
						<label class="form-label">배너 이미지 (여러 개 가능)</label> <input
							type="file" name="bannerImage" class="form-control"
							accept="image/*" multiple required>
					</div>

					<!-- 작가 영역 -->
					<h5 class="fw-semibold mt-5 mb-3">작가 정보</h5>

					<div id="maker-container"></div>

					<template id="maker-template">
						<div class="maker-group">
							<h6 class="fw-bold">작가</h6>
							<div class="mb-2">
								<label class="form-label">작가 이름</label> <input type="text"
									name="makerName" class="form-control" required>
							</div>
							<div class="mb-2">
								<label class="form-label">작가 소개</label> <input type="text"
									name="makerInfo" class="form-control" required>
							</div>
							<div class="mb-2">
								<label class="form-label">작가 이미지</label> <input type="file"
									name="makerImages" class="form-control" accept="image/*"
									required>
							</div>
							<button type="button" class="remove-btn btn-sm rounded">삭제</button>
						</div>
					</template>

					<div class="mb-4">
						<button type="button" id="add-button"
							class="btn btn-outline-primary">작가 추가</button>
					</div>

					<!-- 버튼 -->
					<div class="d-flex justify-content-between">
						<button type="submit"
							class="btn btn-warning fw-semibold text-dark">등록</button>
						<a href="../mypage" class="btn btn-secondary">취소</a>
					</div>
				</form>
			</div>
		</div>
	</div>
</body>
</html>